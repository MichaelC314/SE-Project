import { generateModels } from '@aws-amplify/graphql-generator';
/**
 * Generates GraphQL types for a given AppSync API
 */
export class StackMetadataGraphqlModelsGenerator {
    fetchSchema;
    resultBuilder;
    /**
     * Configures the AppSyncGraphqlTypesGenerator
     */
    constructor(fetchSchema, resultBuilder) {
        this.fetchSchema = fetchSchema;
        this.resultBuilder = resultBuilder;
    }
    generateModels = async ({ target, generateIndexRules, emitAuthProvider, useExperimentalPipelinedTransformer, transformerVersion, respectPrimaryKeyAttributesOnConnectionField, generateModelsForLazyLoadAndCustomSelectionSet, addTimestampFields, handleListNullabilityTransparently, }) => {
        const schema = await this.fetchSchema();
        if (!schema) {
            // eslint-disable-next-line amplify-backend-rules/prefer-amplify-errors
            throw new Error('Invalid schema');
        }
        const generatedModels = await generateModels({
            schema,
            target,
            generateIndexRules,
            emitAuthProvider,
            useExperimentalPipelinedTransformer,
            transformerVersion,
            respectPrimaryKeyAttributesOnConnectionField,
            generateModelsForLazyLoadAndCustomSelectionSet,
            addTimestampFields,
            handleListNullabilityTransparently,
        });
        return this.resultBuilder(generatedModels);
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JhcGhxbF9tb2RlbHNfZ2VuZXJhdG9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2dyYXBocWxfbW9kZWxzX2dlbmVyYXRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFPaEU7O0dBRUc7QUFDSCxNQUFNLE9BQU8sbUNBQW1DO0lBT3BDO0lBQ0E7SUFMVjs7T0FFRztJQUNILFlBQ1UsV0FBa0MsRUFDbEMsYUFFYTtRQUhiLGdCQUFXLEdBQVgsV0FBVyxDQUF1QjtRQUNsQyxrQkFBYSxHQUFiLGFBQWEsQ0FFQTtJQUNwQixDQUFDO0lBRUosY0FBYyxHQUFHLEtBQUssRUFBRSxFQUN0QixNQUFNLEVBQ04sa0JBQWtCLEVBQ2xCLGdCQUFnQixFQUNoQixtQ0FBbUMsRUFDbkMsa0JBQWtCLEVBQ2xCLDRDQUE0QyxFQUM1Qyw4Q0FBOEMsRUFDOUMsa0JBQWtCLEVBQ2xCLGtDQUFrQyxHQUNQLEVBQUUsRUFBRTtRQUMvQixNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUV4QyxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ1gsdUVBQXVFO1lBQ3ZFLE1BQU0sSUFBSSxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztTQUNuQztRQUVELE1BQU0sZUFBZSxHQUFHLE1BQU0sY0FBYyxDQUFDO1lBQzNDLE1BQU07WUFDTixNQUFNO1lBQ04sa0JBQWtCO1lBQ2xCLGdCQUFnQjtZQUNoQixtQ0FBbUM7WUFDbkMsa0JBQWtCO1lBQ2xCLDRDQUE0QztZQUM1Qyw4Q0FBOEM7WUFDOUMsa0JBQWtCO1lBQ2xCLGtDQUFrQztTQUNuQyxDQUFDLENBQUM7UUFFSCxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDN0MsQ0FBQyxDQUFDO0NBQ0giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZW5lcmF0ZU1vZGVscyB9IGZyb20gJ0Bhd3MtYW1wbGlmeS9ncmFwaHFsLWdlbmVyYXRvcic7XG5pbXBvcnQge1xuICBHZW5lcmF0aW9uUmVzdWx0LFxuICBHcmFwaHFsTW9kZWxzR2VuZXJhdG9yLFxuICBNb2RlbHNHZW5lcmF0aW9uUGFyYW1ldGVycyxcbn0gZnJvbSAnLi9tb2RlbF9nZW5lcmF0b3IuanMnO1xuXG4vKipcbiAqIEdlbmVyYXRlcyBHcmFwaFFMIHR5cGVzIGZvciBhIGdpdmVuIEFwcFN5bmMgQVBJXG4gKi9cbmV4cG9ydCBjbGFzcyBTdGFja01ldGFkYXRhR3JhcGhxbE1vZGVsc0dlbmVyYXRvclxuICBpbXBsZW1lbnRzIEdyYXBocWxNb2RlbHNHZW5lcmF0b3JcbntcbiAgLyoqXG4gICAqIENvbmZpZ3VyZXMgdGhlIEFwcFN5bmNHcmFwaHFsVHlwZXNHZW5lcmF0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZmV0Y2hTY2hlbWE6ICgpID0+IFByb21pc2U8c3RyaW5nPixcbiAgICBwcml2YXRlIHJlc3VsdEJ1aWxkZXI6IChcbiAgICAgIGZpbGVNYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sXG4gICAgKSA9PiBHZW5lcmF0aW9uUmVzdWx0LFxuICApIHt9XG5cbiAgZ2VuZXJhdGVNb2RlbHMgPSBhc3luYyAoe1xuICAgIHRhcmdldCxcbiAgICBnZW5lcmF0ZUluZGV4UnVsZXMsXG4gICAgZW1pdEF1dGhQcm92aWRlcixcbiAgICB1c2VFeHBlcmltZW50YWxQaXBlbGluZWRUcmFuc2Zvcm1lcixcbiAgICB0cmFuc2Zvcm1lclZlcnNpb24sXG4gICAgcmVzcGVjdFByaW1hcnlLZXlBdHRyaWJ1dGVzT25Db25uZWN0aW9uRmllbGQsXG4gICAgZ2VuZXJhdGVNb2RlbHNGb3JMYXp5TG9hZEFuZEN1c3RvbVNlbGVjdGlvblNldCxcbiAgICBhZGRUaW1lc3RhbXBGaWVsZHMsXG4gICAgaGFuZGxlTGlzdE51bGxhYmlsaXR5VHJhbnNwYXJlbnRseSxcbiAgfTogTW9kZWxzR2VuZXJhdGlvblBhcmFtZXRlcnMpID0+IHtcbiAgICBjb25zdCBzY2hlbWEgPSBhd2FpdCB0aGlzLmZldGNoU2NoZW1hKCk7XG5cbiAgICBpZiAoIXNjaGVtYSkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGFtcGxpZnktYmFja2VuZC1ydWxlcy9wcmVmZXItYW1wbGlmeS1lcnJvcnNcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzY2hlbWEnKTtcbiAgICB9XG5cbiAgICBjb25zdCBnZW5lcmF0ZWRNb2RlbHMgPSBhd2FpdCBnZW5lcmF0ZU1vZGVscyh7XG4gICAgICBzY2hlbWEsXG4gICAgICB0YXJnZXQsXG4gICAgICBnZW5lcmF0ZUluZGV4UnVsZXMsXG4gICAgICBlbWl0QXV0aFByb3ZpZGVyLFxuICAgICAgdXNlRXhwZXJpbWVudGFsUGlwZWxpbmVkVHJhbnNmb3JtZXIsXG4gICAgICB0cmFuc2Zvcm1lclZlcnNpb24sXG4gICAgICByZXNwZWN0UHJpbWFyeUtleUF0dHJpYnV0ZXNPbkNvbm5lY3Rpb25GaWVsZCxcbiAgICAgIGdlbmVyYXRlTW9kZWxzRm9yTGF6eUxvYWRBbmRDdXN0b21TZWxlY3Rpb25TZXQsXG4gICAgICBhZGRUaW1lc3RhbXBGaWVsZHMsXG4gICAgICBoYW5kbGVMaXN0TnVsbGFiaWxpdHlUcmFuc3BhcmVudGx5LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMucmVzdWx0QnVpbGRlcihnZW5lcmF0ZWRNb2RlbHMpO1xuICB9O1xufVxuIl19